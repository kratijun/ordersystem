(()=>{var e={};e.id=618,e.ids=[618],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},7310:e=>{"use strict";e.exports=require("url")},1041:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>o,routeModule:()=>m,tree:()=>d});var r=t(7096),a=t(6132),l=t(7284),i=t.n(l),n=t(2564),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=["",{children:["dashboard",{children:["table-view",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1651)),"C:\\Users\\olive\\Desktop\\ordersystem\\app\\dashboard\\table-view\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5581)),"C:\\Users\\olive\\Desktop\\ordersystem\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,9943)),"C:\\Users\\olive\\Desktop\\ordersystem\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\olive\\Desktop\\ordersystem\\app\\dashboard\\table-view\\page.tsx"],u="/dashboard/table-view/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/table-view/page",pathname:"/dashboard/table-view",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4568:(e,s,t)=>{Promise.resolve().then(t.bind(t,6050))},6050:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>TableViewPage});var r=t(784),a=t(9885),l=t(4800),i=t(9576),n=t(599),c=t(5555),d=t(1890),o=t(3770),u=t(9551),x=t(5441),m=t(6206),h=t(8375),g=t(2385),p=t(5894),b=t(1264);function TableViewPage(){let{user:e}=(0,l.useAuth)(),[s,t]=(0,a.useState)([]),[f,j]=(0,a.useState)([]),[y,v]=(0,a.useState)(null),[N,w]=(0,a.useState)([]),[C,k]=(0,a.useState)(!0),[_,P]=(0,a.useState)(""),[E,q]=(0,a.useState)("");(0,a.useEffect)(()=>{fetchData()},[]);let fetchData=async()=>{try{let[e,s]=await Promise.all([i.ss.getAll(),i.fi.getAll()]);e&&"object"==typeof e&&"success"in e&&e.success&&s&&"object"==typeof s&&"success"in s&&s.success&&(t(e.data),j(s.data))}catch(e){console.error("Fehler beim Laden der Daten:",e)}finally{k(!1)}},handleTableClick=e=>{v(e),w([]),"OCCUPIED"===e.status&&fetchTableOrders(e.id)},fetchTableOrders=async e=>{try{let s=await i.kn.getAll({tableId:e});s&&"object"==typeof s&&"success"in s&&s.success}catch(e){console.error("Fehler beim Laden der Tischbestellungen:",e)}},addToOrder=e=>{let s=N.find(s=>s.productId===e);s?w(N.map(s=>s.productId===e?{...s,quantity:s.quantity+1}:s)):w([...N,{productId:e,quantity:1}])},removeFromOrder=e=>{let s=N.find(s=>s.productId===e);s&&s.quantity>1?w(N.map(s=>s.productId===e?{...s,quantity:s.quantity-1}:s)):w(N.filter(s=>s.productId!==e))},submitOrder=async()=>{if(y&&0!==N.length)try{await i.ss.update(y.id,{status:"OCCUPIED"});let e=await i.kn.create({tableId:y.id,items:N});e&&"object"==typeof e&&"success"in e&&e.success&&(w([]),v(null),fetchData(),alert("Bestellung erfolgreich aufgenommen!"))}catch(e){console.error("Fehler beim Aufnehmen der Bestellung:",e),alert("Fehler beim Aufnehmen der Bestellung")}},getStatusBadge=e=>{switch(e){case"FREE":return r.jsx(d.C,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Frei"});case"OCCUPIED":return r.jsx(d.C,{variant:"secondary",className:"bg-red-100 text-red-800",children:"Belegt"});case"RESERVED":return r.jsx(d.C,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"Reserviert"});case"CLOSED":return r.jsx(d.C,{variant:"secondary",className:"bg-gray-100 text-gray-800",children:"Geschlossen"});default:return r.jsx(d.C,{variant:"secondary",children:e})}},getStatusColor=e=>{switch(e){case"FREE":return"bg-green-100 border-green-300 hover:bg-green-200";case"OCCUPIED":return"bg-red-100 border-red-300 hover:bg-red-200";case"RESERVED":return"bg-yellow-100 border-yellow-300 hover:bg-yellow-200";case"CLOSED":return"bg-gray-100 border-gray-300 hover:bg-gray-200";default:return"bg-gray-100 border-gray-300"}},D=f.filter(e=>{let s=e.name.toLowerCase().includes(_.toLowerCase()),t=""===E||"Alle"===E||e.category===E;return s&&t});return C?r.jsx("div",{className:"flex justify-center items-center h-64",children:"Laden..."}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tisch\xfcbersicht & Bestellungsaufnahme"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Klicken Sie auf einen Tisch, um eine Bestellung aufzunehmen."})]}),y?(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:(0,r.jsxs)(n.Zb,{children:[r.jsx(n.Ol,{children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)(n.ll,{children:["Bestellung f\xfcr Tisch ",y.number]}),(0,r.jsxs)(c.z,{variant:"outline",onClick:()=>v(null),children:[r.jsx(m.Z,{className:"h-4 w-4 mr-2"}),"Abbrechen"]})]})}),(0,r.jsxs)(n.aY,{children:[(0,r.jsxs)("div",{className:"flex space-x-4 mb-4",children:[r.jsx("div",{className:"flex-1",children:r.jsx(o.I,{placeholder:"Produkt suchen...",value:_,onChange:e=>P(e.target.value)})}),r.jsx("div",{className:"w-48",children:r.jsx("select",{value:E,onChange:e=>q(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:["Alle","Vorspeisen","Hauptgerichte","Desserts","Getr\xe4nke","Alkohol"].map(e=>r.jsx("option",{value:"Alle"===e?"":e,children:e},e))})})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-96 overflow-y-auto",children:D.map(e=>{let s=N.find(s=>s.productId===e.id);return r.jsx("div",{className:"border rounded-lg p-3 hover:bg-gray-50",children:(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium",children:e.name}),r.jsx("p",{className:"text-sm text-gray-600",children:e.category}),(0,r.jsxs)("p",{className:"text-lg font-semibold text-blue-600",children:["€",e.price.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[s&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>removeFromOrder(e.id),children:r.jsx(h.Z,{className:"h-4 w-4"})}),r.jsx("span",{className:"w-8 text-center font-medium",children:s.quantity})]}),r.jsx(c.z,{size:"sm",onClick:()=>addToOrder(e.id),children:r.jsx(g.Z,{className:"h-4 w-4"})})]})]})},e.id)})})]})]})}),r.jsx("div",{children:(0,r.jsxs)(n.Zb,{children:[r.jsx(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex items-center gap-2",children:[r.jsx(p.Z,{className:"h-5 w-5"}),"Aktuelle Bestellung"]})}),r.jsx(n.aY,{children:0===N.length?r.jsx("p",{className:"text-gray-500 text-center py-8",children:"Keine Artikel ausgew\xe4hlt"}):(0,r.jsxs)("div",{className:"space-y-3",children:[N.map(e=>{let s=f.find(s=>s.id===e.productId);return s?(0,r.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:s.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["€",s.price.toFixed(2)," x ",e.quantity]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"font-semibold",children:["€",(s.price*e.quantity).toFixed(2)]}),r.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>removeFromOrder(e.productId),children:r.jsx(m.Z,{className:"h-4 w-4"})})]})]},e.productId):null}),r.jsx("div",{className:"border-t pt-3 mt-3",children:(0,r.jsxs)("div",{className:"flex justify-between items-center text-lg font-bold",children:[r.jsx("span",{children:"Gesamt:"}),(0,r.jsxs)("span",{children:["€",N.reduce((e,s)=>{let t=f.find(e=>e.id===s.productId);return e+(t?t.price*s.quantity:0)},0).toFixed(2)]})]})}),(0,r.jsxs)(c.z,{className:"w-full mt-4",onClick:submitOrder,size:"lg",children:[r.jsx(b.Z,{className:"h-4 w-4 mr-2"}),"Bestellung aufnehmen"]})]})})]})})]}):(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Verf\xfcgbare Tische"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:s.map(e=>r.jsx(n.Zb,{className:`cursor-pointer transition-all duration-200 ${getStatusColor(e.status)}`,onClick:()=>handleTableClick(e),children:(0,r.jsxs)(n.aY,{className:"p-4 text-center",children:[r.jsx(u.Z,{className:"h-8 w-8 mx-auto mb-2"}),(0,r.jsxs)("h3",{className:"font-semibold text-lg",children:["Tisch ",e.number]}),getStatusBadge(e.status),"OCCUPIED"===e.status&&(0,r.jsxs)("div",{className:"mt-2 flex items-center justify-center text-sm text-gray-600",children:[r.jsx(x.Z,{className:"h-4 w-4 mr-1"}),"Aktive Bestellung"]})]})},e.id))})]})]})}},3770:(e,s,t)=>{"use strict";t.d(s,{I:()=>i});var r=t(784),a=t(9885),l=t(8699);let i=a.forwardRef(({className:e,type:s,...t},a)=>r.jsx("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));i.displayName="Input"},1651:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>l,default:()=>c});var r=t(5153);let a=(0,r.createProxy)(String.raw`C:\Users\olive\Desktop\ordersystem\app\dashboard\table-view\page.tsx`),{__esModule:l,$$typeof:i}=a,n=a.default,c=n}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[204,80,61,312,828,844,41,890],()=>__webpack_exec__(1041));module.exports=t})();