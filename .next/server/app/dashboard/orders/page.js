(()=>{var e={};e.id=857,e.ids=[857],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},7310:e=>{"use strict";e.exports=require("url")},5640:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>o,routeModule:()=>m,tree:()=>c});var a=t(7096),r=t(6132),l=t(7284),i=t.n(l),n=t(2564),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["dashboard",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5917)),"C:\\Users\\olive\\Desktop\\ordersystem\\app\\dashboard\\orders\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5581)),"C:\\Users\\olive\\Desktop\\ordersystem\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,9943)),"C:\\Users\\olive\\Desktop\\ordersystem\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\olive\\Desktop\\ordersystem\\app\\dashboard\\orders\\page.tsx"],u="/dashboard/orders/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/orders/page",pathname:"/dashboard/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6964:(e,s,t)=>{Promise.resolve().then(t.bind(t,7080))},7080:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>OrdersPage});var a=t(784),r=t(9885),l=t(5441),i=t(2032),n=t(1057),d=t(5894),c=t(2385),o=t(9518),u=t(8626),x=t(9494),m=t(6303),h=t(9576),p=t(599),f=t(1890),g=t(5555),j=t(3770),b=t(2124);function OrdersPage(){let[e,s]=(0,r.useState)([]),[t,v]=(0,r.useState)(!0),[y,N]=(0,r.useState)(""),[P,w]=(0,r.useState)("all"),k=(0,r.useCallback)(()=>e.filter(e=>{let s=e.table.number.toString().includes(y)||e.user.name.toLowerCase().includes(y.toLowerCase()),t="all"===P||e.status===P;return s&&t}),[e,y,P]);(0,r.useEffect)(()=>{loadOrders()},[]),(0,r.useEffect)(()=>{k()},[k]);let loadOrders=async()=>{try{v(!0);let e=await h.kn.getAll();if(e&&"object"==typeof e&&"success"in e&&e.success)s(e.data||[]);else{let e=[{id:"1",status:"OPEN",total:45.5,createdAt:new Date().toISOString(),table:{number:5},user:{name:"Max Mustermann"},items:[{id:"1",quantity:2,product:{name:"Schnitzel",price:18.5}},{id:"2",quantity:1,product:{name:"Pommes",price:8.5}}]}];s(e)}}catch(e){s([])}finally{v(!1)}},updateOrderStatus=async(e,t)=>{try{let a=await h.kn.updateStatus(e,t);a&&"object"==typeof a&&"success"in a&&a.success&&s(s=>s.map(s=>s.id===e?{...s,status:t}:s))}catch(e){}},deleteOrder=async e=>{let t=window.confirm("M\xf6chten Sie diese Bestellung wirklich l\xf6schen?");if(t)try{let t=await h.kn.delete(e);t&&"object"==typeof t&&"success"in t&&t.success&&s(s=>s.filter(s=>s.id!==e))}catch(e){}},getStatusBadge=e=>{let s={OPEN:{label:"Offen",variant:"secondary",icon:l.Z},PREPARING:{label:"In Zubereitung",variant:"default",icon:l.Z},READY:{label:"Bereit",variant:"outline",icon:i.Z},PAID:{label:"Bezahlt",variant:"outline",icon:i.Z},CANCELLED:{label:"Storniert",variant:"outline",icon:n.Z}},t=s[e]||s.OPEN,r=t.icon;return(0,a.jsxs)(f.C,{variant:t.variant,className:"flex items-center gap-1",children:[a.jsx(r,{className:"h-3 w-3"}),t.label]})},getTimeAgo=e=>{let s=new Date,t=new Date(e),a=Math.floor((s.getTime()-t.getTime())/6e4);return a<1?"Gerade eben":a<60?`vor ${a} Min`:`vor ${Math.floor(a/60)}h ${a%60}m`},A=k();return t?a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Lade Bestellungen..."})]})}):a.jsx(b.Z,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(d.Z,{className:"h-8 w-8"}),"Bestellungen"]}),a.jsx("p",{className:"text-gray-600",children:"\xdcbersicht aller Bestellungen"})]}),(0,a.jsxs)(g.z,{className:"flex items-center gap-2",children:[a.jsx(c.Z,{className:"h-4 w-4"}),"Neue Bestellung"]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx(j.I,{placeholder:"Nach Tisch oder Kellner suchen...",value:y,onChange:e=>N(e.target.value),className:"pl-10"})]})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(g.z,{variant:"all"===P?"default":"outline",onClick:()=>w("all"),size:"sm",children:["Alle (",e.length,")"]}),(0,a.jsxs)(g.z,{variant:"OPEN"===P?"default":"outline",onClick:()=>w("OPEN"),size:"sm",children:["Offen (",e.filter(e=>"OPEN"===e.status).length,")"]}),(0,a.jsxs)(g.z,{variant:"PAID"===P?"default":"outline",onClick:()=>w("PAID"),size:"sm",children:["Bezahlt (",e.filter(e=>"PAID"===e.status).length,")"]})]})]}),0===A.length?a.jsx(p.Zb,{children:(0,a.jsxs)(p.aY,{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(d.Z,{className:"h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Keine Bestellungen gefunden"}),a.jsx("p",{className:"text-gray-500 text-center",children:y||"all"!==P?"Versuchen Sie andere Suchkriterien.":"Es sind noch keine Bestellungen vorhanden."})]})}):a.jsx("div",{className:"grid gap-4",children:A.map(e=>(0,a.jsxs)(p.Zb,{className:"hover:shadow-md transition-shadow",children:[(0,a.jsxs)(p.Ol,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(p.ll,{className:"flex items-center gap-2",children:["Tisch ",e.table.number,(0,a.jsxs)(f.C,{variant:"outline",children:["#",e.id.slice(0,8)]})]}),getStatusBadge(e.status)]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-500",children:getTimeAgo(e.createdAt)}),(0,a.jsxs)("div",{className:"flex gap-1",children:[a.jsx(g.z,{size:"sm",variant:"outline",children:a.jsx(u.Z,{className:"h-3 w-3"})}),a.jsx(g.z,{size:"sm",variant:"outline",children:a.jsx(x.Z,{className:"h-3 w-3"})}),a.jsx(g.z,{size:"sm",variant:"outline",onClick:()=>{deleteOrder(e.id)},children:a.jsx(m.Z,{className:"h-3 w-3"})})]})]})]}),(0,a.jsxs)(p.SZ,{children:["Kellner: ",e.user.name," • ",e.items.length," Artikel • €",e.total.toFixed(2)]})]}),(0,a.jsxs)(p.aY,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[e.items.slice(0,3).map(e=>(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{children:[e.quantity,"x ",e.product.name]}),(0,a.jsxs)("span",{children:["€",(e.quantity*e.product.price).toFixed(2)]})]},e.id)),e.items.length>3&&(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["+",e.items.length-3," weitere Artikel..."]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-4",children:["OPEN"===e.status&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(g.z,{size:"sm",variant:"outline",onClick:()=>{updateOrderStatus(e.id,"PREPARING")},children:"In Zubereitung"}),a.jsx(g.z,{size:"sm",variant:"outline",onClick:()=>{updateOrderStatus(e.id,"PAID")},children:"Als bezahlt markieren"})]}),"PREPARING"===e.status&&a.jsx(g.z,{size:"sm",variant:"outline",onClick:()=>{updateOrderStatus(e.id,"READY")},children:"Als bereit markieren"}),"READY"===e.status&&a.jsx(g.z,{size:"sm",variant:"outline",onClick:()=>{updateOrderStatus(e.id,"PAID")},children:"Als bezahlt markieren"})]})]})]},e.id))})]})})}},3770:(e,s,t)=>{"use strict";t.d(s,{I:()=>i});var a=t(784),r=t(9885),l=t(8699);let i=r.forwardRef(({className:e,type:s,...t},r)=>a.jsx("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));i.displayName="Input"},5917:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>l,default:()=>d});var a=t(5153);let r=(0,a.createProxy)(String.raw`C:\Users\olive\Desktop\ordersystem\app\dashboard\orders\page.tsx`),{__esModule:l,$$typeof:i}=r,n=r.default,d=n}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[204,80,61,256,812,828,844,41,890,124],()=>__webpack_exec__(5640));module.exports=t})();