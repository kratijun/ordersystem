(()=>{var e={};e.id=523,e.ids=[523],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},7310:e=>{"use strict";e.exports=require("url")},6468:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c});var t=r(7096),l=r(6132),a=r(7284),n=r.n(a),i=r(2564),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(s,d);let c=["",{children:["dashboard",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3675)),"C:\\Users\\olive\\Desktop\\ordersystem\\app\\dashboard\\users\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,5581)),"C:\\Users\\olive\\Desktop\\ordersystem\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,9943)),"C:\\Users\\olive\\Desktop\\ordersystem\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\olive\\Desktop\\ordersystem\\app\\dashboard\\users\\page.tsx"],x="/dashboard/users/page",h={require:r,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/dashboard/users/page",pathname:"/dashboard/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8104:(e,s,r)=>{Promise.resolve().then(r.bind(r,3885))},3885:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>UsersPage});var t=r(784),l=r(9885),a=r(4800),n=r(9576),i=r(599),d=r(5555),c=r(1890),o=r(3422),x=r(3770),h=r(2451),u=r(2124),m=r(2385),j=r(1672),p=r(4901),g=r(3528);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,g.Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),v=(0,g.Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);var b=r(9518),N=r(517),y=r(2995),w=r(6206),C=r(9494),z=r(6303),A=r(3250),_=r(8626);function UsersPage(){let{user:e}=(0,a.useAuth)(),[s,r]=(0,l.useState)([]),[g,k]=(0,l.useState)([]),[U,Z]=(0,l.useState)(!0),[P,B]=(0,l.useState)(""),[S,D]=(0,l.useState)(!1),[E,I]=(0,l.useState)(null),[R,q]=(0,l.useState)({}),[M,F]=(0,l.useState)({name:"",password:"",role:"WAITER"});(0,l.useEffect)(()=>{fetchUsers()},[]),(0,l.useEffect)(()=>{let e=s.filter(e=>e.name.toLowerCase().includes(P.toLowerCase())||e.role.toLowerCase().includes(P.toLowerCase()));k(e)},[s,P]);let fetchUsers=async()=>{try{let e=await n.g8.getAll();e.success&&r(e.data||[])}catch(e){console.error("Fehler beim Laden der Benutzer:",e)}finally{Z(!1)}},handleCreateUser=async()=>{try{let e=await n.g8.create(M);e.success&&(F({name:"",password:"",role:"WAITER"}),D(!1),fetchUsers())}catch(e){console.error("Fehler beim Erstellen des Benutzers:",e)}},handleUpdateUser=async()=>{if(E)try{let e=await n.g8.update(E.id,{name:E.name,role:E.role});e.success&&(I(null),fetchUsers())}catch(e){console.error("Fehler beim Aktualisieren des Benutzers:",e)}},handleDeleteUser=async e=>{if(confirm("Sind Sie sicher, dass Sie diesen Benutzer l\xf6schen m\xf6chten?"))try{let s=await n.g8.delete(e);s.success&&fetchUsers()}catch(e){console.error("Fehler beim L\xf6schen des Benutzers:",e)}},togglePasswordVisibility=e=>{q(s=>({...s,[e]:!s[e]}))},getRoleBadge=e=>{switch(e){case"ADMIN":return t.jsx(c.C,{variant:"destructive",className:"bg-red-100 text-red-800",children:"Administrator"});case"WAITER":return t.jsx(c.C,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:"Kellner"});default:return t.jsx(c.C,{variant:"outline",children:e})}};return U?t.jsx("div",{className:"flex items-center justify-center h-64",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Benutzer werden geladen..."})]})}):t.jsx(u.Z,{requiredRole:"ADMIN",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Benutzerverwaltung"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Verwalten Sie Benutzer und deren Rollen"})]}),(0,t.jsxs)(d.z,{onClick:()=>D(!0),children:[t.jsx(m.Z,{className:"mr-2 h-4 w-4"}),"Neuer Benutzer"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsxs)(i.Zb,{children:[(0,t.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(i.ll,{className:"text-sm font-medium",children:"Gesamt Benutzer"}),t.jsx(j.Z,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsx(i.aY,{children:t.jsx("div",{className:"text-2xl font-bold",children:s.length})})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(i.ll,{className:"text-sm font-medium",children:"Administratoren"}),t.jsx(p.Z,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsx(i.aY,{children:t.jsx("div",{className:"text-2xl font-bold",children:s.filter(e=>"ADMIN"===e.role).length})})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(i.ll,{className:"text-sm font-medium",children:"Kellner"}),t.jsx(f,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsx(i.aY,{children:t.jsx("div",{className:"text-2xl font-bold",children:s.filter(e=>"WAITER"===e.role).length})})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(i.ll,{className:"text-sm font-medium",children:"Aktive Benutzer"}),t.jsx(v,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(i.aY,{children:[t.jsx("div",{className:"text-2xl font-bold",children:s.length}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Alle Benutzer"})]})]})]}),(0,t.jsxs)(i.Zb,{children:[t.jsx(i.Ol,{children:t.jsx(i.ll,{children:"Benutzer suchen"})}),t.jsx(i.aY,{children:(0,t.jsxs)("div",{className:"relative",children:[t.jsx(b.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),t.jsx(x.I,{placeholder:"Nach Name oder Rolle suchen...",value:P,onChange:e=>B(e.target.value),className:"pl-10"})]})})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsxs)(i.Ol,{children:[t.jsx(i.ll,{children:"Alle Benutzer"}),t.jsx(i.SZ,{children:"\xdcbersicht aller registrierten Benutzer im System"})]}),t.jsx(i.aY,{children:(0,t.jsxs)(o.iA,{children:[t.jsx(o.xD,{children:(0,t.jsxs)(o.SC,{children:[t.jsx(o.ss,{children:"Name"}),t.jsx(o.ss,{children:"Rolle"}),t.jsx(o.ss,{children:"Erstellt am"}),t.jsx(o.ss,{children:"Bestellungen"}),t.jsx(o.ss,{children:"Aktionen"})]})}),t.jsx(o.RM,{children:g.map(s=>(0,t.jsxs)(o.SC,{children:[t.jsx(o.pj,{children:E?.id===s.id?t.jsx(x.I,{value:E.name,onChange:e=>I({...E,name:e.target.value})}):(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-blue-600 text-sm font-medium",children:s.name.charAt(0).toUpperCase()})}),t.jsx("span",{className:"font-medium",children:s.name})]})}),t.jsx(o.pj,{children:E?.id===s.id?(0,t.jsxs)("select",{value:E.role,onChange:e=>I({...E,role:e.target.value}),className:"border rounded px-2 py-1",children:[t.jsx("option",{value:"ADMIN",children:"Administrator"}),t.jsx("option",{value:"WAITER",children:"Kellner"})]}):getRoleBadge(s.role)}),t.jsx(o.pj,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[t.jsx(N.Z,{className:"h-4 w-4"}),t.jsx("span",{children:new Date(s.createdAt).toLocaleDateString("de-DE")})]})}),t.jsx(o.pj,{children:(0,t.jsxs)("span",{className:"text-sm font-medium",children:[s._count?.orders||0," Bestellungen"]})}),t.jsx(o.pj,{children:t.jsx("div",{className:"flex space-x-2",children:E?.id===s.id?(0,t.jsxs)(t.Fragment,{children:[t.jsx(d.z,{size:"sm",onClick:handleUpdateUser,children:t.jsx(y.Z,{className:"h-4 w-4"})}),t.jsx(d.z,{size:"sm",variant:"outline",onClick:()=>I(null),children:t.jsx(w.Z,{className:"h-4 w-4"})})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(d.z,{size:"sm",variant:"outline",onClick:()=>I(s),disabled:s.id===e?.id,children:t.jsx(C.Z,{className:"h-4 w-4"})}),s.id!==e?.id&&t.jsx(d.z,{size:"sm",variant:"destructive",onClick:()=>handleDeleteUser(s.id),children:t.jsx(z.Z,{className:"h-4 w-4"})})]})})})]},s.id))})]})})]}),S&&t.jsx(i.Zb,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg w-full max-w-md",children:[t.jsx(i.Ol,{children:t.jsx(i.ll,{children:"Neuen Benutzer hinzuf\xfcgen"})}),(0,t.jsxs)(i.aY,{children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx(h._,{htmlFor:"name",children:"Name"}),t.jsx(x.I,{id:"name",value:M.name,onChange:e=>F({...M,name:e.target.value})})]}),(0,t.jsxs)("div",{children:[t.jsx(h._,{htmlFor:"password",children:"Passwort"}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx(x.I,{id:"password",type:R.new?"text":"password",value:M.password,onChange:e=>F({...M,password:e.target.value})}),t.jsx(d.z,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>togglePasswordVisibility("new"),children:R.new?t.jsx(A.Z,{className:"h-4 w-4"}):t.jsx(_.Z,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)("div",{children:[t.jsx(h._,{htmlFor:"role",children:"Rolle"}),(0,t.jsxs)("select",{id:"role",value:M.role,onChange:e=>F({...M,role:e.target.value}),className:"w-full border rounded px-3 py-2",children:[t.jsx("option",{value:"WAITER",children:"Kellner"}),t.jsx("option",{value:"ADMIN",children:"Administrator"})]})]})]}),(0,t.jsxs)("div",{className:"flex space-x-2 mt-6",children:[t.jsx(d.z,{onClick:handleCreateUser,children:"Erstellen"}),t.jsx(d.z,{variant:"outline",onClick:()=>D(!1),children:"Abbrechen"})]})]})]})})]})})}},3675:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>n,__esModule:()=>a,default:()=>d});var t=r(5153);let l=(0,t.createProxy)(String.raw`C:\Users\olive\Desktop\ordersystem\app\dashboard\users\page.tsx`),{__esModule:a,$$typeof:n}=l,i=l.default,d=i}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),r=s.X(0,[204,80,61,524,256,503,828,844,41,890,928,422,124],()=>__webpack_exec__(6468));module.exports=r})();