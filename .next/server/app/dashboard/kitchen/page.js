(()=>{var e={};e.id=237,e.ids=[237],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},7310:e=>{"use strict";e.exports=require("url")},8688:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>d});var r=s(7096),a=s(6132),l=s(7284),n=s.n(l),i=s(2564),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(t,c);let d=["",{children:["dashboard",{children:["kitchen",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1648)),"C:\\Users\\olive\\Desktop\\ordersystem\\app\\dashboard\\kitchen\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5581)),"C:\\Users\\olive\\Desktop\\ordersystem\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,9943)),"C:\\Users\\olive\\Desktop\\ordersystem\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\olive\\Desktop\\ordersystem\\app\\dashboard\\kitchen\\page.tsx"],x="/dashboard/kitchen/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/kitchen/page",pathname:"/dashboard/kitchen",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5754:(e,t,s)=>{Promise.resolve().then(s.bind(s,1958))},1958:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>KitchenPage});var r=s(784),a=s(9885),l=s(644),n=s(2621),i=s(5441),c=s(1831),d=s(2032),o=s(4800),x=s(9576),m=s(599),u=s(5555),h=s(1890);function KitchenPage(){let{user:e}=(0,o.useAuth)(),[t,s]=(0,a.useState)([]),[g,p]=(0,a.useState)(!0);(0,a.useEffect)(()=>{fetchOrderItems();let e=setInterval(fetchOrderItems,3e4);return()=>clearInterval(e)},[]);let fetchOrderItems=async()=>{try{let e=await x.kn.getAll();if(e&&"object"==typeof e&&"success"in e&&e.success){let t=e.data||[],r=[];t.forEach(e=>{"OPEN"===e.status&&(e.items||[]).forEach(t=>{r.push({...t,order:{id:e.id,createdAt:e.createdAt,table:e.table,user:e.user}})})}),r.sort((e,t)=>new Date(e.order.createdAt).getTime()-new Date(t.order.createdAt).getTime()),s(r)}}catch(e){s([])}finally{p(!1)}},handleUpdateItemStatus=async(e,t)=>{try{let s=await x.$e.updateStatus(e,t);s&&"object"==typeof s&&"success"in s&&s.success&&fetchOrderItems()}catch(e){}},getStatusBadge=e=>{switch(e){case"ORDERED":return r.jsx(h.C,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"Bestellt"});case"PREPARING":return r.jsx(h.C,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:"In Zubereitung"});case"READY":return r.jsx(h.C,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Fertig"});default:return r.jsx(h.C,{variant:"secondary",children:e})}},getCategoryColor=e=>{switch(e){case"Vorspeisen":return"border-l-blue-500";case"Hauptgerichte":return"border-l-green-500";case"Desserts":return"border-l-pink-500";case"Getr\xe4nke":return"border-l-cyan-500";case"Alkohol":return"border-l-purple-500";default:return"border-l-gray-500"}},getTimeSinceOrder=e=>{let t=new Date,s=new Date(e),r=Math.floor((t.getTime()-s.getTime())/6e4);return r<1?"Gerade bestellt":1===r?"1 Minute":`${r} Minuten`},getUrgencyClass=e=>{let t=new Date,s=new Date(e),r=Math.floor((t.getTime()-s.getTime())/6e4);return r>30?"bg-red-50 border-red-200":r>15?"bg-orange-50 border-orange-200":"bg-white border-gray-200"},b=t.reduce((e,t)=>{let s=`${t.order.id}-${t.order.table.number}`;return e[s]||(e[s]={orderId:t.order.id,tableNumber:t.order.table.number,userName:t.order.user.name,createdAt:t.order.createdAt,items:[]}),e[s].items.push(t),e},{}),j={total:t.length,ordered:t.filter(e=>"ORDERED"===e.status).length,preparing:t.filter(e=>"PREPARING"===e.status).length,ready:t.filter(e=>"READY"===e.status).length};return g?r.jsx("div",{className:"flex justify-center items-center h-64",children:"Laden..."}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"K\xfcche"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"\xdcbersicht \xfcber alle zu bereitenden Bestellungen."})]}),(0,r.jsxs)(u.z,{onClick:()=>{fetchOrderItems()},variant:"outline",children:[r.jsx(l.Z,{className:"mr-2 h-4 w-4"}),"Aktualisieren"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(m.Zb,{children:r.jsx(m.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(n.Z,{className:"h-5 w-5 text-blue-600"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Gesamt Artikel"}),r.jsx("p",{className:"text-2xl font-bold",children:j.total})]})]})})}),r.jsx(m.Zb,{children:r.jsx(m.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(i.Z,{className:"h-5 w-5 text-yellow-600"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Bestellt"}),r.jsx("p",{className:"text-2xl font-bold",children:j.ordered})]})]})})}),r.jsx(m.Zb,{children:r.jsx(m.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(c.Z,{className:"h-5 w-5 text-orange-600"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"In Zubereitung"}),r.jsx("p",{className:"text-2xl font-bold",children:j.preparing})]})]})})}),r.jsx(m.Zb,{children:r.jsx(m.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(d.Z,{className:"h-5 w-5 text-green-600"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Fertig"}),r.jsx("p",{className:"text-2xl font-bold",children:j.ready})]})]})})})]}),0===Object.keys(b).length?r.jsx(m.Zb,{children:(0,r.jsxs)(m.aY,{className:"p-8 text-center",children:[r.jsx(n.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Keine offenen Bestellungen"}),r.jsx("p",{className:"text-gray-600",children:"Alle Bestellungen sind abgearbeitet!"})]})}):r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:Object.values(b).map(e=>(0,r.jsxs)(m.Zb,{className:`border-l-4 ${getUrgencyClass(e.createdAt)}`,children:[r.jsx(m.Ol,{className:"pb-3",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(m.ll,{className:"text-lg",children:["Tisch ",e.tableNumber]}),(0,r.jsxs)(m.SZ,{children:["Bestellt von ",e.userName," • ",getTimeSinceOrder(e.createdAt)," her"]})]}),(0,r.jsxs)(h.C,{variant:"outline",className:"text-xs",children:[e.items.length," Artikel"]})]})}),r.jsx(m.aY,{className:"space-y-3",children:e.items.map(e=>(0,r.jsxs)("div",{className:`p-3 rounded-lg border-l-4 ${getCategoryColor(e.product.category)} bg-gray-50`,children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium",children:e.product.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[e.product.category," • Menge: ",e.quantity]})]}),getStatusBadge(e.status)]}),(0,r.jsxs)("div",{className:"flex space-x-2 mt-3",children:["ORDERED"===e.status&&(0,r.jsxs)(u.z,{size:"sm",variant:"outline",onClick:()=>{handleUpdateItemStatus(e.id,"PREPARING")},className:"text-orange-600 border-orange-200 hover:bg-orange-50",children:[r.jsx(c.Z,{className:"mr-1 h-3 w-3"}),"Zubereitung starten"]}),"PREPARING"===e.status&&(0,r.jsxs)(u.z,{size:"sm",variant:"outline",onClick:()=>{handleUpdateItemStatus(e.id,"READY")},className:"text-green-600 border-green-200 hover:bg-green-50",children:[r.jsx(d.Z,{className:"mr-1 h-3 w-3"}),"Fertig melden"]}),"READY"===e.status&&(0,r.jsxs)(h.C,{variant:"secondary",className:"bg-green-100 text-green-800",children:[r.jsx(d.Z,{className:"mr-1 h-3 w-3"}),"Bereit zum Servieren"]})]})]},e.id))})]},`${e.orderId}-${e.tableNumber}`))})]})}},1648:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>l,default:()=>c});var r=s(5153);let a=(0,r.createProxy)(String.raw`C:\Users\olive\Desktop\ordersystem\app\dashboard\kitchen\page.tsx`),{__esModule:l,$$typeof:n}=a,i=a.default,c=i}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[204,80,61,965,828,844,41,890],()=>__webpack_exec__(8688));module.exports=s})();